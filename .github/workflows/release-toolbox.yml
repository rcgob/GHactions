name: Release Toolbox

on:
  push:
    branches:
      - 'main'
    tags:
      - '*'
      
jobs:
  release-toolbox:
   runs-on: ubuntu-latest
   steps:
     - name: Check out repository
       uses: actions/checkout@v3
     - name: Set up MATLAB
       uses: matlab-actions/setup-matlab@v1
     - name: Run script
       uses: matlab-actions/run-command@v1
       with:
         command: cd buildUtilities, releaseTask("1.0"), cd ..
     - name: Release toolbox
       uses: "marvinpinto/action-automatic-releases@latest"
       with:
         repo_token: "${{ secrets.GITHUB_TOKEN }}"
         prerelease: false
         files: |
           releases/GHactions-toolbox-installer.mltbx
